"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[356],{6356:(J,l,a)=>{a.r(l),a.d(l,{ForgetPasswordComponent:()=>q});var p=a(6814),r=a(95),e=a(4769),c=a(9862);let d=(()=>{class o{constructor(t){this._HttpClient=t}forgotPasswords(t){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",t)}resetCode(t){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",t)}resetPassword(t){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",t)}static#e=this.\u0275fac=function(s){return new(s||o)(e.LFG(c.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var m=a(1120);function _(o,i){1&o&&(e.TgZ(0,"p",9),e._uU(1,"Required Email"),e.qZA())}function g(o,i){1&o&&(e.TgZ(0,"p",9),e._uU(1,"Email is Invalid"),e.qZA())}function u(o,i){if(1&o&&(e.TgZ(0,"div",7),e.YNc(1,_,2,0,"p",8),e.YNc(2,g,2,0,"p",8),e.qZA()),2&o){const t=e.oxw(2);let s,n;e.xp6(1),e.Q6J("ngIf",null==(s=t.forgetCodePassword.get("email"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=t.forgetCodePassword.get("email"))?null:n.getError("email"))}}function f(o,i){if(1&o&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.isMsg)}}function w(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",1)(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.passwordForget())}),e._UZ(2,"input",3),e.YNc(3,u,3,2,"div",4),e.TgZ(4,"button",5),e._uU(5,"Forgot Password"),e.qZA(),e.YNc(6,f,2,1,"p",6),e.qZA()()}if(2&o){const t=e.oxw();let s;e.xp6(1),e.Q6J("formGroup",t.forgetCodePassword),e.xp6(2),e.Q6J("ngIf",(null==(s=t.forgetCodePassword.get("email"))?null:s.errors)&&(null==(s=t.forgetCodePassword.get("email"))?null:s.touched)),e.xp6(3),e.Q6J("ngIf",t.isMsg)}}function C(o,i){1&o&&(e.TgZ(0,"p",9),e._uU(1,"Required Password"),e.qZA())}function x(o,i){1&o&&(e.TgZ(0,"p",9),e._uU(1,"Verify Reset Code"),e.qZA())}function h(o,i){if(1&o&&(e.TgZ(0,"div",7),e.YNc(1,C,2,0,"p",8),e.YNc(2,x,2,0,"p",8),e.qZA()),2&o){const t=e.oxw(2);let s,n;e.xp6(1),e.Q6J("ngIf",null==(s=t.resetCodeForm.get("resetCode"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=t.resetCodeForm.get("resetCode"))?null:n.getError("pattern"))}}function P(o,i){if(1&o&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.isMsg)}}function F(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",1)(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.passwordReset())}),e._UZ(2,"input",11),e.YNc(3,h,3,2,"div",4),e.TgZ(4,"button",5),e._uU(5,"Reset Code"),e.qZA(),e.YNc(6,P,2,1,"p",6),e.qZA()()}if(2&o){const t=e.oxw();let s;e.xp6(1),e.Q6J("formGroup",t.resetCodeForm),e.xp6(2),e.Q6J("ngIf",(null==(s=t.resetCodeForm.get("resetCode"))?null:s.errors)&&(null==(s=t.resetCodeForm.get("resetCode"))?null:s.touched)),e.xp6(3),e.Q6J("ngIf",t.isMsg)}}function Z(o,i){1&o&&(e.TgZ(0,"p",9),e._uU(1,"Required Password"),e.qZA())}function T(o,i){1&o&&(e.TgZ(0,"p",9),e._uU(1,"Reset Password"),e.qZA())}function v(o,i){if(1&o&&(e.TgZ(0,"div",7),e.YNc(1,Z,2,0,"p",8),e.YNc(2,T,2,0,"p",8),e.qZA()),2&o){const t=e.oxw(2);let s,n;e.xp6(1),e.Q6J("ngIf",null==(s=t.resetCodePassword.get("newPassword"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=t.resetCodePassword.get("newPassword"))?null:n.getError("pattern"))}}function I(o,i){if(1&o&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.isMsg)}}function N(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",1)(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.passwordCodeForget())}),e._UZ(2,"input",12),e.YNc(3,v,3,2,"div",4),e.TgZ(4,"button",5),e._uU(5,"Reset Password"),e.qZA(),e.YNc(6,I,2,1,"p",6),e.qZA()()}if(2&o){const t=e.oxw();let s;e.xp6(1),e.Q6J("formGroup",t.resetCodePassword),e.xp6(2),e.Q6J("ngIf",(null==(s=t.resetCodePassword.get("newPassword"))?null:s.errors)&&(null==(s=t.resetCodePassword.get("newPassword"))?null:s.touched)),e.xp6(3),e.Q6J("ngIf",t.isMsg)}}let q=(()=>{class o{constructor(t,s){this._ForgetPassService=t,this._Router=s,this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.isMsg="",this.forgetCodePassword=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email])}),this.resetCodeForm=new r.cw({resetCode:new r.NI("",[r.kI.required,r.kI.pattern(/^[a-zA-Z0-9]{4,8}$/)])}),this.resetCodePassword=new r.cw({newPassword:new r.NI("",[r.kI.required,r.kI.pattern(/^[A-Za-z0-9]{6,}/)])})}passwordForget(){let t=this.forgetCodePassword.value;this.email=t.email,this._ForgetPassService.forgotPasswords(t).subscribe({next:s=>{this.isMsg=s.message,this.step1=!1,this.step2=!0},error:s=>{this.isMsg=s.error.message}})}passwordReset(){this._ForgetPassService.resetCode(this.resetCodeForm.value).subscribe({next:s=>{this.isMsg=s.status,this.step2=!1,this.step3=!0},error:s=>{this.isMsg=s.error.status}})}passwordCodeForget(){let t=this.resetCodePassword.value;t.email=this.email,this._ForgetPassService.resetPassword(t).subscribe({next:s=>{s.token&&(localStorage.setItem("token",s.token),this._Router.navigate(["/home"]))},error:s=>{this.isMsg=s.error.message}})}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(d),e.Y36(m.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-forget-password"]],standalone:!0,features:[e.jDz],decls:3,vars:3,consts:[["class","w-50 m-auto bg-main-light shadow p-3 demo",4,"ngIf"],[1,"w-50","m-auto","bg-main-light","shadow","p-3","demo"],[3,"formGroup","ngSubmit"],["type","email","formControlName","email","placeholder","Email",1,"form-control"],["class","alert alert-danger",4,"ngIf"],[1,"btn","bg-main","text-white","w-100","mt-3"],["class","alert alert-danger mt-3 w-100 text-center m-0 small",4,"ngIf"],[1,"alert","alert-danger"],["class","small m-0",4,"ngIf"],[1,"small","m-0"],[1,"alert","alert-danger","mt-3","w-100","text-center","m-0","small"],["type","text","formControlName","resetCode","placeholder","Reset Code",1,"form-control"],["type","password","formControlName","newPassword","placeholder","Reset Password",1,"form-control"]],template:function(s,n){1&s&&(e.YNc(0,w,7,3,"section",0),e.YNc(1,F,7,3,"section",0),e.YNc(2,N,7,3,"section",0)),2&s&&(e.Q6J("ngIf",n.step1),e.xp6(1),e.Q6J("ngIf",n.step2),e.xp6(1),e.Q6J("ngIf",n.step3))},dependencies:[p.ez,p.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".demo[_ngcontent-%COMP%]{margin-top:90px!important}"]})}return o})()}}]);