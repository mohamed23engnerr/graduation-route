"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[80],{5080:(p,h,s)=>{s.r(h),s.d(h,{WishlistComponent:()=>g});var l=s(6814),d=s(1120),t=s(4769),u=s(6286),n=s(1288),v=s(2425);function c(r,m){if(1&r){const i=t.EpF();t.TgZ(0,"i",14),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit,_=t.oxw();return t.KtG(_.addWishlist(o._id))}),t.qZA()}}function a(r,m){if(1&r){const i=t.EpF();t.TgZ(0,"i",15),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit,_=t.oxw();return t.KtG(_.removeWishlist(o._id))}),t.qZA()}}const C=function(r){return["/details",r]};function f(r,m){if(1&r){const i=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t.YNc(2,c,1,0,"i",6),t.YNc(3,a,1,0,"i",7),t.TgZ(4,"div",8),t._UZ(5,"img",9),t.TgZ(6,"h5",10),t._uU(7),t.qZA(),t.TgZ(8,"h6"),t._uU(9),t.qZA(),t.TgZ(10,"div",11)(11,"span"),t._uU(12),t.qZA(),t.TgZ(13,"span"),t._UZ(14,"i",12),t._uU(15),t.qZA()()(),t.TgZ(16,"button",13),t.NdJ("click",function(){const _=t.CHM(i).$implicit,T=t.oxw();return t.KtG(T.addCart(_._id))}),t._uU(17,"Add To Cart"),t.qZA()()()}if(2&r){const i=m.$implicit,e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.wishlistId.includes(i._id)),t.xp6(1),t.Q6J("ngIf",e.wishlistId.includes(i._id)),t.xp6(1),t.Q6J("routerLink",t.VKq(8,C,i._id)),t.xp6(1),t.Q6J("src",i.imageCover,t.LSH),t.xp6(2),t.Oqu(i.category.name),t.xp6(2),t.Oqu(i.title.split(" ",2).join(" ")),t.xp6(3),t.hij("",i.price," EGP"),t.xp6(3),t.hij(" ",i.ratingsAverage,"")}}let g=(()=>{class r{constructor(i,e,o){this._WishlistService=i,this._CartService=e,this._ToastrService=o,this.productData=[],this.wishlistId=[]}ngOnInit(){this._WishlistService.getToWishlist().subscribe({next:i=>{this.productData=i.data;const e=i.data.map(o=>o._id);this.wishlistId=e}})}addWishlist(i){this._WishlistService.addToWishlist(i).subscribe({next:e=>{this.wishlistId=e.data,this._CartService.wishNumber.next(e.data.length),this._ToastrService.success("\u2764",e.message)}})}removeWishlist(i){this._WishlistService.removeToWishlist(i).subscribe({next:e=>{this._ToastrService.success("\u274c",e.message),this.wishlistId=e.data,this._CartService.wishNumber.next(e.data.length);const o=this.productData.filter(_=>this.wishlistId.includes(_._id));this.productData=o}})}addCart(i){this._CartService.addToCart(i).subscribe({next:e=>{this._ToastrService.success(e.message),this._CartService.cartNumber.next(e.numOfCartItems)},error:e=>{}})}static#t=this.\u0275fac=function(e){return new(e||r)(t.Y36(u.M),t.Y36(n.N),t.Y36(v._W))};static#i=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:4,vars:1,consts:[[1,"pt-4"],[1,"container-fluid"],[1,"row","justify-content-center","g-4"],["class","col-md-2",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"product","p-2"],["role","button","class","fa-regular fa-heart fs-1 heart",3,"click",4,"ngIf"],["role","button","class","fa-solid fa-heart fs-1 heart text1",3,"click",4,"ngIf"],["role","button",3,"routerLink"],["alt","",1,"w-100","mb-3",3,"src"],[1,"text-main"],[1,"d-flex","justify-content-between"],[1,"fas","fa-star","rating-color"],[1,"add-btn","btn","bg-main","text-white","w-100","mt-3",3,"click"],["role","button",1,"fa-regular","fa-heart","fs-1","heart",3,"click"],["role","button",1,"fa-solid","fa-heart","fs-1","heart","text1",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t.YNc(3,f,18,10,"div",3),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("ngForOf",o.productData))},dependencies:[l.ez,l.sg,l.O5,d.rH],styles:[".text1[_ngcontent-%COMP%]{color:red}"]})}return r})()},1288:(p,h,s)=>{s.d(h,{N:()=>u});var l=s(5619),d=s(4769),t=s(9862);let u=(()=>{class n{constructor(c){this._HttpClient=c,this.cartNumber=new l.X(0),this.wishNumber=new l.X(0)}addToCart(c){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:c})}getToCart(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart")}removeToCart(c){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${c}`)}upDataToCart(c,a){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${c}`,{count:a})}clearToCart(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart")}checkOut(c,a){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${c}?url=http://localhost:4200`,
//!GitHup
{shippingAddress:a})}AllOlder(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/orders")}static#t=this.\u0275fac=function(a){return new(a||n)(d.LFG(t.eN))};static#i=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);